angular.module("app",["ngRoute"]),angular.module("app").controller("ApplicationCtrl",["$scope",function(e){e.$on("login",function(n,t){e.currentUser=t})}]),angular.module("app").controller("LoginCtrl",["$scope","UserSvc",function(e,n){e.login=function(t,r){n.login(t,r).then(function(n){e.$emit("login",n.data)})}}]),angular.module("app").controller("LogoutCtrl",["$location",function(e){$scope.login=function(){Session.clear(),e.path("/")}}]),angular.module("app").controller("RegisterCtrl",["$scope","UserSvc",function(e,n){e.register=function(t,r,o,s,a,i,u,c,l,p,f,g){n.register(t,r,o,s,a,i,u,c,l,p,f,g).then(function(n){e.$emit("login",n)})}}]),angular.module("app").filter("newLine",["$filter",function(){return function(e){return e?e.replace(/\n\r?/g,"<br>"):e}}]).controller("RequestsCtrl",["$scope","RequestsSvc",function(e,n){e.makeRequest=function(){e.requestText&&n.create({username:e.currentUser.username,subject:e.requestSubject,toEmail:e.requestEmail,replied:!1,requestFull:"My name is "+e.currentUser.username+" and I am a "+e.currentUser.position+" at "+e.currentUser.organization+". I am requesting the following information under the "+e.currentUser.state+" Freedom of Information Act: \n \n"+e.requestText+"\n \nI ask that you waive any and all fees associated with the gathering of this information as I am collecting and reporting on this information in the public interest. \n I also ask that you cite reasons for any redactions pursuant to Illinois FOIA law. \n My contact info is as follows: \n"+e.currentUser.username+"\n"+e.currentUser.addressLineOne+"\n"+e.currentUser.addressLineTwo+"\n"+e.currentUser.city+","+e.currentUser.state+" "+e.currentUser.postal+"\nPhone: "+e.currentUser.phone+"\n\nMuch appreciated,\n"+e.currentUser.username,response:"There is no response yet.",attachment:"There is no attachment."}).success(function(){e.requestText=null,e.requestSubject=null,e.requestEmail=null})},n.fetch().success(function(n){e.requests=n}),e.$on("ws:new_post",function(n,t){e.$apply(function(){e.requests.unshift(t)})})}]),angular.module("app").service("RequestsSvc",["$http",function(e){this.fetch=function(){return e.get("/api/requests")},this.create=function(n){return e.post("/api/requests",n)}}]),angular.module("app").config(["$routeProvider",function(e){e.when("/",{controller:"RequestsCtrl",templateUrl:"requests.html"}).when("/register",{controller:"RegisterCtrl",templateUrl:"register.html"}).when("/login",{controller:"LoginCtrl",templateUrl:"login.html"})}]),angular.module("app").service("UserSvc",["$http",function(e){var n=this;n.getUser=function(){return e.get("/api/users",{headers:{"X-Auth":this.token}})},n.login=function(t,r){return e.post("/api/sessions",{email:t,password:r}).then(function(t){return n.token=t.data,e.defaults.headers.common["X-Auth"]=t.data,n.getUser()})},n.register=function(t,r,o,s,a,i,u,c,l,p,f,g){return console.log(t,r,g),e.post("/api/users",{email:t,password:r,username:o+" "+s,addressLineOne:a,addressLineTwo:i,city:u,state:c,postal:l,organization:p,position:f,phone:g}).then(function(){return n.login(t,r)})}}]),angular.module("app").run(["$rootScope","$timeout",function(e,n){!function t(){var r="ws://localhost:3000",o=new WebSocket(r);o.onclose=function(){console.log("WebSocket closed. Reconnection..."),n(t,1e4)},o.onmessage=function(n){var t=JSON.parse(n.data);e.$broadcast("ws:"+t.topic,t.data)}}()}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImFwcGxpY2F0aW9uLmN0cmwuanMiLCJsb2dpbi5jdHJsLmpzIiwibG9nb3V0LmN0cmwuanMiLCJyZWdpc3Rlci5jdHJsLmpzIiwicmVxdWVzdHMuY3RybC5qcyIsInJlcXVlc3RzLnN2Yy5qcyIsInJvdXRlcy5qcyIsInVzZXIuc3ZjLmpzIiwid2Vic29ja2V0cy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxRQUFBLE9BQUEsT0FDQSxZQ0RBLFFBQUEsT0FBQSxPQUNBLFdBQUEsbUJBQUEsU0FBQSxTQUFBLEdBQ0EsRUFBQSxJQUFBLFFBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxZQUFBLE9DSEEsUUFBQSxPQUFBLE9BQ0EsV0FBQSxhQUFBLFNBQUEsVUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLE1BQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxNQUFBLEVBQUEsR0FDQSxLQUFBLFNBQUEsR0FDQSxFQUFBLE1BQUEsUUFBQSxFQUFBLFlDTEEsUUFBQSxPQUFBLE9BQ0EsV0FBQSxjQUFBLFlBQUEsU0FBQSxHQUNBLE9BQUEsTUFBQSxXQUNBLFFBQUEsUUFDQSxFQUFBLEtBQUEsU0NKQSxRQUFBLE9BQUEsT0FDQSxXQUFBLGdCQUFBLFNBQUEsVUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLFNBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsS0FBQSxTQUFBLEdBQ0EsRUFBQSxNQUFBLFFBQUEsU0NMQSxRQUFBLE9BQUEsT0FDQSxPQUFBLFdBQUEsVUFBQSxXQUNBLE1BQUEsVUFBQSxHQUNBLE1BQUEsR0FDQSxFQUFBLFFBQUEsU0FBQSxRQURBLE1BSUEsV0FBQSxnQkFBQSxTQUFBLGNBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxZQUFBLFdBQ0EsRUFBQSxhQUNBLEVBQUEsUUFDQSxTQUFBLEVBQUEsWUFBQSxTQUNBLFFBQUEsRUFBQSxlQUNBLFFBQUEsRUFBQSxhQUVBLFNBQUEsRUFDQSxZQUFBLGNBQUEsRUFBQSxZQUFBLFNBQ0EsZUFBQSxFQUFBLFlBQUEsU0FBQSxPQUFBLEVBQUEsWUFBQSxhQUFBLHlEQUNBLEVBQUEsWUFBQSxNQUFBLHFDQUNBLEVBQUEsWUFBQSx1U0FFQSxFQUFBLFlBQUEsU0FBQSxLQUNBLEVBQUEsWUFBQSxlQUFBLEtBQ0EsRUFBQSxZQUFBLGVBQUEsS0FDQSxFQUFBLFlBQUEsS0FBQSxJQUFBLEVBQUEsWUFBQSxNQUFBLElBQUEsRUFBQSxZQUFBLE9BQUEsWUFDQSxFQUFBLFlBQUEsTUFBQSwwQkFFQSxFQUFBLFlBQUEsU0FDQSxTQUFBLDRCQUNBLFdBQUEsNEJBQ0EsUUFBQSxXQUNBLEVBQUEsWUFBQSxLQUNBLEVBQUEsZUFBQSxLQUNBLEVBQUEsYUFBQSxRQUlBLEVBQUEsUUFBQSxRQUFBLFNBQUEsR0FDQSxFQUFBLFNBQUEsSUFFQSxFQUFBLElBQUEsY0FBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLE9BQUEsV0FDQSxFQUFBLFNBQUEsUUFBQSxVQzFDQSxRQUFBLE9BQUEsT0FDQSxRQUFBLGVBQUEsUUFBQSxTQUFBLEdBQ0EsS0FBQSxNQUFBLFdBQ0EsTUFBQSxHQUFBLElBQUEsa0JBRUEsS0FBQSxPQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsS0FBQSxnQkFBQSxPQ05BLFFBQUEsT0FBQSxPQUNBLFFBQUEsaUJBQUEsU0FBQSxHQUNBLEVBQ0EsS0FBQSxLQUFBLFdBQUEsZUFBQSxZQUFBLGtCQUNBLEtBQUEsYUFBQSxXQUFBLGVBQUEsWUFBQSxrQkFDQSxLQUFBLFVBQUEsV0FBQSxZQUFBLFlBQUEsa0JDTEEsUUFBQSxPQUFBLE9BQ0EsUUFBQSxXQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxJQUNBLEdBQUEsUUFBQSxXQUNBLE1BQUEsR0FBQSxJQUFBLGNBQ0EsU0FBQSxTQUFBLEtBQUEsVUFHQSxFQUFBLE1BQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLEtBQUEsaUJBQ0EsTUFBQSxFQUNBLFNBQUEsSUFDQSxLQUFBLFNBQUEsR0FHQSxNQUZBLEdBQUEsTUFBQSxFQUFBLEtBQ0EsRUFBQSxTQUFBLFFBQUEsT0FBQSxVQUFBLEVBQUEsS0FDQSxFQUFBLGFBR0EsRUFBQSxTQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsTUFEQSxTQUFBLElBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxLQUFBLGNBQ0EsTUFBQSxFQUNBLFNBQUEsRUFDQSxTQUFBLEVBQUEsSUFBQSxFQUNBLGVBQUEsRUFDQSxlQUFBLEVBQ0EsS0FBQSxFQUNBLE1BQUEsRUFDQSxPQUFBLEVBQ0EsYUFBQSxFQUNBLFNBQUEsRUFDQSxNQUFBLElBQ0EsS0FBQSxXQUNBLE1BQUEsR0FBQSxNQUFBLEVBQUEsU0NqQ0EsUUFBQSxPQUFBLE9BQ0EsS0FBQSxhQUFBLFdBQUEsU0FBQSxFQUFBLElBQ0EsUUFBQSxLQUNBLEdBQUEsR0FBQSxzQkFDQSxFQUFBLEdBQUEsV0FBQSxFQUNBLEdBQUEsUUFBQSxXQUNBLFFBQUEsSUFBQSxxQ0FDQSxFQUFBLEVBQUEsTUFFQSxFQUFBLFVBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxLQUFBLE1BQUEsRUFBQSxLQUNBLEdBQUEsV0FBQSxNQUFBLEVBQUEsTUFBQSxFQUFBIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXIubW9kdWxlKCdhcHAnLFtcbiAgJ25nUm91dGUnXG5dKVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignQXBwbGljYXRpb25DdHJsJywgZnVuY3Rpb24gKCRzY29wZSkge1xuICAkc2NvcGUuJG9uKCdsb2dpbicsIGZ1bmN0aW9uIChfLCB1c2VyKSB7XG4gICAgJHNjb3BlLmN1cnJlbnRVc2VyID0gdXNlclxuICB9KVxufSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbnRyb2xsZXIoJ0xvZ2luQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsIFVzZXJTdmMpIHtcbiAgJHNjb3BlLmxvZ2luID0gZnVuY3Rpb24gKGVtYWlsLCBwYXNzd29yZCkge1xuICAgIFVzZXJTdmMubG9naW4oZW1haWwscGFzc3dvcmQpXG4gICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAkc2NvcGUuJGVtaXQoJ2xvZ2luJywgcmVzcG9uc2UuZGF0YSlcbiAgICB9KVxuICB9XG59KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignTG9nb3V0Q3RybCcsIGZ1bmN0aW9uICgkbG9jYXRpb24pIHtcbiAgJHNjb3BlLmxvZ2luID0gZnVuY3Rpb24gKGVtYWlsLCBwYXNzd29yZCwgdXNlcm5hbWUpIHtcbiAgICBTZXNzaW9uLmNsZWFyKClcbiAgICAkbG9jYXRpb24ucGF0aCgnLycpXG4gIH1cbn0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb250cm9sbGVyKCdSZWdpc3RlckN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCBVc2VyU3ZjKSB7XG4gICRzY29wZS5yZWdpc3RlciA9IGZ1bmN0aW9uIChlbWFpbCwgcGFzc3dvcmQsIG5hbWVGaXJzdCwgbmFtZUxhc3QsIGFkZHJlc3NMaW5lT25lLCBhZGRyZXNzTGluZVR3bywgY2l0eSwgc3RhdGUsIHBvc3RhbCwgb3JnYW5pemF0aW9uLCBwb3NpdGlvbiwgcGhvbmUpIHtcbiAgICBVc2VyU3ZjLnJlZ2lzdGVyKGVtYWlsLCBwYXNzd29yZCwgbmFtZUZpcnN0LCBuYW1lTGFzdCwgYWRkcmVzc0xpbmVPbmUsIGFkZHJlc3NMaW5lVHdvLCBjaXR5LCBzdGF0ZSwgcG9zdGFsLCBvcmdhbml6YXRpb24sIHBvc2l0aW9uLCBwaG9uZSlcbiAgICAudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgJHNjb3BlLiRlbWl0KCdsb2dpbicsIHVzZXIpXG4gICAgfSlcbiAgfVxufSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmZpbHRlcignbmV3TGluZScsIGZ1bmN0aW9uICgkZmlsdGVyKSB7XG4gIHJldHVybiBmdW5jdGlvbihkYXRhKSB7XG4gICAgaWYgKCFkYXRhKSByZXR1cm4gZGF0YTtcbiAgICByZXR1cm4gZGF0YS5yZXBsYWNlKC9cXG5cXHI/L2csICc8YnI+Jyk7XG4gIH1cbn0pXG4uY29udHJvbGxlcignUmVxdWVzdHNDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCBSZXF1ZXN0c1N2Yykge1xuICAkc2NvcGUubWFrZVJlcXVlc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCRzY29wZS5yZXF1ZXN0VGV4dCkge1xuICAgICAgUmVxdWVzdHNTdmMuY3JlYXRlKHtcbiAgICAgICAgdXNlcm5hbWU6ICRzY29wZS5jdXJyZW50VXNlci51c2VybmFtZSxcbiAgICAgICAgc3ViamVjdDogJHNjb3BlLnJlcXVlc3RTdWJqZWN0LFxuICAgICAgICB0b0VtYWlsOiAkc2NvcGUucmVxdWVzdEVtYWlsLFxuICAgICAgICAvL2RhdGU6ICdkYXRlLm5vdycsXG4gICAgICAgIHJlcGxpZWQ6IGZhbHNlLFxuICAgICAgICByZXF1ZXN0RnVsbDogXCJNeSBuYW1lIGlzIFwiICsgJHNjb3BlLmN1cnJlbnRVc2VyLnVzZXJuYW1lICtcbiAgICAgICAgXCIgYW5kIEkgYW0gYSBcIiArICRzY29wZS5jdXJyZW50VXNlci5wb3NpdGlvbiArIFwiIGF0IFwiICsgJHNjb3BlLmN1cnJlbnRVc2VyLm9yZ2FuaXphdGlvbiArIFwiLiBcIiArXG4gICAgICAgIFwiSSBhbSByZXF1ZXN0aW5nIHRoZSBmb2xsb3dpbmcgaW5mb3JtYXRpb24gdW5kZXIgdGhlIFwiICsgJHNjb3BlLmN1cnJlbnRVc2VyLnN0YXRlICsgXCIgRnJlZWRvbSBvZiBJbmZvcm1hdGlvbiBBY3Q6IFxcbiBcXG5cIiArXG4gICAgICAgICRzY29wZS5yZXF1ZXN0VGV4dCArIFwiXFxuIFxcblwiICtcbiAgICAgICAgXCJJIGFzayB0aGF0IHlvdSB3YWl2ZSBhbnkgYW5kIGFsbCBmZWVzIGFzc29jaWF0ZWQgd2l0aCB0aGUgZ2F0aGVyaW5nIG9mIHRoaXMgaW5mb3JtYXRpb24gYXMgSSBhbSBjb2xsZWN0aW5nIGFuZCByZXBvcnRpbmcgb24gdGhpcyBpbmZvcm1hdGlvbiBpbiB0aGUgcHVibGljIGludGVyZXN0LiBcXG4gSSBhbHNvIGFzayB0aGF0IHlvdSBjaXRlIHJlYXNvbnMgZm9yIGFueSByZWRhY3Rpb25zIHB1cnN1YW50IHRvIElsbGlub2lzIEZPSUEgbGF3LiBcXG4gTXkgY29udGFjdCBpbmZvIGlzIGFzIGZvbGxvd3M6IFxcblwiICtcbiAgICAgICAgJHNjb3BlLmN1cnJlbnRVc2VyLnVzZXJuYW1lICsgXCJcXG5cIiArXG4gICAgICAgICRzY29wZS5jdXJyZW50VXNlci5hZGRyZXNzTGluZU9uZSArIFwiXFxuXCIgK1xuICAgICAgICAkc2NvcGUuY3VycmVudFVzZXIuYWRkcmVzc0xpbmVUd28gKyBcIlxcblwiICtcbiAgICAgICAgJHNjb3BlLmN1cnJlbnRVc2VyLmNpdHkgKyBcIixcIiArICRzY29wZS5jdXJyZW50VXNlci5zdGF0ZSArIFwiIFwiICsgJHNjb3BlLmN1cnJlbnRVc2VyLnBvc3RhbCArIFwiXFxuXCIgK1xuICAgICAgICBcIlBob25lOiBcIiArICRzY29wZS5jdXJyZW50VXNlci5waG9uZSArIFwiXFxuXFxuXCIgK1xuICAgICAgICBcIk11Y2ggYXBwcmVjaWF0ZWQsXFxuXCIgK1xuICAgICAgICAkc2NvcGUuY3VycmVudFVzZXIudXNlcm5hbWUsXG4gICAgICAgIHJlc3BvbnNlOiAnVGhlcmUgaXMgbm8gcmVzcG9uc2UgeWV0LicsXG4gICAgICAgIGF0dGFjaG1lbnQ6ICdUaGVyZSBpcyBubyBhdHRhY2htZW50LidcbiAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlcXVlc3QpIHtcbiAgICAgICAgJHNjb3BlLnJlcXVlc3RUZXh0ID0gbnVsbCxcbiAgICAgICAgJHNjb3BlLnJlcXVlc3RTdWJqZWN0ID0gbnVsbCxcbiAgICAgICAgJHNjb3BlLnJlcXVlc3RFbWFpbCA9IG51bGxcbiAgICAgIH0pXG4gICAgfVxuICB9XG4gIFJlcXVlc3RzU3ZjLmZldGNoKCkuc3VjY2VzcyhmdW5jdGlvbiAocmVxdWVzdHMpIHtcbiAgICAkc2NvcGUucmVxdWVzdHMgPSByZXF1ZXN0c1xuICB9KVxuICAkc2NvcGUuJG9uKCd3czpuZXdfcG9zdCcsIGZ1bmN0aW9uIChfLCByZXF1ZXN0KSB7XG4gICAgJHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XG4gICAgICAkc2NvcGUucmVxdWVzdHMudW5zaGlmdChyZXF1ZXN0KVxuICAgIH0pXG4gIH0pXG59KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uc2VydmljZSgnUmVxdWVzdHNTdmMnLCBmdW5jdGlvbiAoJGh0dHApIHtcbiAgdGhpcy5mZXRjaCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvcmVxdWVzdHMnKVxuICB9XG4gIHRoaXMuY3JlYXRlID0gZnVuY3Rpb24gKHJlcXVlc3QpIHtcbiAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9yZXF1ZXN0cycsIHJlcXVlc3QpXG4gIH1cbn0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb25maWcoZnVuY3Rpb24gKCRyb3V0ZVByb3ZpZGVyKSB7XG4gICRyb3V0ZVByb3ZpZGVyXG4gIC53aGVuKCcvJywgeyBjb250cm9sbGVyOiAnUmVxdWVzdHNDdHJsJywgdGVtcGxhdGVVcmw6ICdyZXF1ZXN0cy5odG1sJyB9KVxuICAud2hlbignL3JlZ2lzdGVyJywgeyBjb250cm9sbGVyOiAnUmVnaXN0ZXJDdHJsJywgdGVtcGxhdGVVcmw6ICdyZWdpc3Rlci5odG1sJyB9KVxuICAud2hlbignL2xvZ2luJywgeyBjb250cm9sbGVyOiAnTG9naW5DdHJsJywgdGVtcGxhdGVVcmw6ICdsb2dpbi5odG1sJyB9KVxufSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLnNlcnZpY2UoJ1VzZXJTdmMnLCBmdW5jdGlvbiAoJGh0dHApIHtcbiAgdmFyIHN2YyA9IHRoaXNcbiAgc3ZjLmdldFVzZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS91c2VycycsIHtcbiAgICAgIGhlYWRlcnM6IHsgJ1gtQXV0aCc6IHRoaXMudG9rZW4gfVxuICAgIH0pXG4gIH1cbiAgc3ZjLmxvZ2luID0gZnVuY3Rpb24gKGVtYWlsLCBwYXNzd29yZCkge1xuICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3Nlc3Npb25zJywge1xuICAgICAgZW1haWw6IGVtYWlsLFxuICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkXG4gICAgfSkudGhlbihmdW5jdGlvbiAodmFsKSB7XG4gICAgICBzdmMudG9rZW4gPSB2YWwuZGF0YVxuICAgICAgJGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ1gtQXV0aCddID0gdmFsLmRhdGFcbiAgICAgIHJldHVybiBzdmMuZ2V0VXNlcigpXG4gICAgfSlcbiAgfVxuICBzdmMucmVnaXN0ZXIgPSBmdW5jdGlvbiAoZW1haWwsIHBhc3N3b3JkLCBuYW1lRmlyc3QsIG5hbWVMYXN0LCBhZGRyZXNzTGluZU9uZSwgYWRkcmVzc0xpbmVUd28sIGNpdHksIHN0YXRlLCBwb3N0YWwsIG9yZ2FuaXphdGlvbiwgcG9zaXRpb24sIHBob25lKSB7XG4gICAgY29uc29sZS5sb2coZW1haWwsIHBhc3N3b3JkLCBwaG9uZSlcbiAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS91c2VycycsIHtcbiAgICAgIGVtYWlsOiBlbWFpbCxcbiAgICAgIHBhc3N3b3JkOiBwYXNzd29yZCxcbiAgICAgIHVzZXJuYW1lOiBuYW1lRmlyc3QgKyAnICcgKyBuYW1lTGFzdCxcbiAgICAgIGFkZHJlc3NMaW5lT25lOiBhZGRyZXNzTGluZU9uZSxcbiAgICAgIGFkZHJlc3NMaW5lVHdvOiBhZGRyZXNzTGluZVR3byxcbiAgICAgIGNpdHk6IGNpdHksXG4gICAgICBzdGF0ZTogc3RhdGUsXG4gICAgICBwb3N0YWw6IHBvc3RhbCxcbiAgICAgIG9yZ2FuaXphdGlvbjogb3JnYW5pemF0aW9uLFxuICAgICAgcG9zaXRpb246IHBvc2l0aW9uLFxuICAgICAgcGhvbmU6IHBob25lXG4gICAgfSkudGhlbiggZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gc3ZjLmxvZ2luKGVtYWlsLCBwYXNzd29yZClcbiAgICB9KVxuICB9XG59KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4ucnVuKGZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkdGltZW91dCkge1xuICAoZnVuY3Rpb24gY29ubmVjdCgpIHtcbiAgICB2YXIgdXJsID0gJ3dzOi8vbG9jYWxob3N0OjMwMDAnXG4gICAgdmFyIGNvbm5lY3Rpb24gPSBuZXcgV2ViU29ja2V0KHVybClcbiAgICBjb25uZWN0aW9uLm9uY2xvc2UgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgY29uc29sZS5sb2coJ1dlYlNvY2tldCBjbG9zZWQuIFJlY29ubmVjdGlvbi4uLicpXG4gICAgICAkdGltZW91dChjb25uZWN0LCAxMCoxMDAwKVxuICAgIH1cbiAgICBjb25uZWN0aW9uLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBwYXlsb2FkID0gSlNPTi5wYXJzZShlLmRhdGEpXG4gICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3dzOicgKyBwYXlsb2FkLnRvcGljLCBwYXlsb2FkLmRhdGEpXG4gICAgfVxuICB9KSgpXG59KVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9